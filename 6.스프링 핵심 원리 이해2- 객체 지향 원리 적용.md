## 1. **μƒλ΅μ΄ ν• μΈ μ •μ±… κ°λ°**
<br>

### 1. **μ •μ±…μ λ³€κ²½**
- μ›λλ” **κ³ μ • κΈμ•΅(μ •μ•΅)** ν• μΈ μ •μ±…. 
- but, μΆ€ λ” ν•©λ¦¬μ μΌλ΅ μ£Όλ¬Έ κΈμ•΅λ‹Ή ν• μΈν•λ” **μ •λ¥  ν• μΈ μ •μ±…**μΌλ΅ λ³€κ²½ν•κ² λλ‹¤λ©΄?
    - ex. 10000μ› μ£Όλ¬Έ μ‹ β†’ 1000μ› ν• μΈ  
             20000μ› μ£Όλ¬Έ μ‹ β†’ 2000μ› ν• μΈ
        
- μ •λ‹µμ€ `DiscountPolicy interface` μ— `RateDiscountPolicy` κµ¬ν„μ²΄λ§ μ¶”κ°€ν•΄μ£Όλ©΄ λλ‹¤.  
  
  ![ratediscountpolicy](https://user-images.githubusercontent.com/87354210/174020320-827c836f-efb3-48e3-9096-df3bc2f20847.png)

<br>
    
### 2. **μƒλ΅μ΄ ν• μΈ μ •μ±… μ μ©κ³Ό λ¬Έμ μ **
   - ν• μΈ μ •μ±…μ„ λ³€κ²½ν•λ ¤λ©΄ ν΄λΌμ΄μ–ΈνΈμΈ `OrderServiceImpl` μ½”λ“λ¥Ό κ³ μ³μ•Όν•λ‹¤.
        
        ```java
        public class OrderServiceImpl implements OrderService {
          // private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
          private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
        }
        ```
   <br>
   
     β—λ¬Έμ μ  λ°κ²¬
  
   <br>
   
   - **μ—­ν• κ³Ό κµ¬ν„** μ„ μ¶©μ‹¤ν•κ² λ¶„λ¦¬ν–λ‚? β†’ π†—
   - **λ‹¤ν•μ„±** λ„ ν™μ©ν•κ³ , **μΈν„°νμ΄μ¤μ™€ κµ¬ν„ κ°μ²΄λ¥Ό λ¶„λ¦¬** ν–λ‚? β†’ π†—
   - **OCP**, **DIP** κ°™μ€ κ°μ²΄μ§€ν–¥ μ„¤κ³„ μ›μΉ™μ„ μ¶©μ‹¤ν μ¤€μν–λ‚?
    β†’ **κ·Έλ ‡κ² λ³΄μ΄μ§€λ§ μ‚¬μ‹¤μ€ μ•„λ‹λ‹¤.**
       - **DIP:** μ£Όλ¬Έμ„λΉ„μ¤ ν΄λΌμ΄μ–ΈνΈ ( `OrderServiceImpl` )λ” `DiscountPolicy` μΈν„°νμ΄μ¤μ— μμ΅΄ν•λ©΄μ„ DIPλ¥Ό μ§€ν‚¨ κ²ƒ κ°™μ€λ°?
       -> β
       - ν΄λμ¤ μμ΅΄κ΄€κ³„λ¥Ό λ¶„μ„ν•΄ λ³΄λ©΄ **μ¶”μƒ(μΈν„°νμ΄μ¤)** λΏλ§ μ•„λ‹λΌ **κµ¬μ²΄(κµ¬ν„) ν΄λμ¤**μ—λ„ μμ΅΄ν•κ³  μλ‹¤.

       <br>
       
        > **μ¶”μƒ(μΈν„°νμ΄μ¤) μμ΅΄**: `DiscountPolicy` <br>
        **κµ¬μ²΄(κµ¬ν„) ν΄λμ¤**: `FixDiscountPolicy`, `RateDiscountPolicy`
          
  - λ³€κ²½ν•μ§€ μ•κ³  ν™•μ¥ν•  μ μλ‹¤λ” κ²ƒμ΄ **OCP** μ λ‚΄μ©. but, <br>
          μ§€κΈ μ½”λ“λ” κΈ°λ¥μ„ ν™•μ¥ν•΄μ„ λ³€κ²½ν•λ©΄ ν΄λΌμ΄μ–ΈνΈ μ½”λ“(`OrderServiceImpl`) μ— μν–¥μ„ μ¤€λ‹¤. ->  **OCPλ¥Ό μ„λ°** 
   <br>
    
   ![ocpμ„λ°](https://user-images.githubusercontent.com/87354210/174022429-eadb3f11-171d-45f7-a96d-a17d0e842ece.png)
    <br>
- `FixDiscountPolicy` λ¥Ό `RateDiscountPolicy` λ΅ λ³€κ²½ν•λ” μκ°„ `OrderServiceImpl` μ μ†μ¤ μ½”λ“λ„ ν•¨κ» λ³€κ²½ν•΄μ•Ό ν•λ‹¤. <br>
-> **OCP μ„λ°**

<br>

> β“ μ–΄λ–»κ² λ¬Έμ λ¥Ό ν•΄κ²°ν•  μ μμ„κΉ?

### > μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•λ„λ΅ μ„¤κ³„λ¥Ό λ³€κ²½ν•μ!

<br>
<br>

### 3. **μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•λ„λ΅ μ½”λ“ λ³€κ²½**

```java
public class OrderServiceImpl implements OrderService {
  //private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
  private DiscountPolicy discountPolicy;
}
```

<br>

- κ·Έλ°λ° κµ¬ν„μ²΄κ°€ μ—†λ‹¤.
- μ‹¤μ  μ‹¤ν–‰μ„ ν•΄λ³΄λ©΄ **NPE(null pointer exception)** κ°€ λ°μƒν•λ‹¤.

<br>

> π’΅ **ν•΄κ²°λ°©μ•** : μ΄ λ¬Έμ λ¥Ό ν•΄κ²°ν•λ ¤λ©΄ λ„κµ°κ°€κ°€ ν΄λΌμ΄μ–ΈνΈμΈ `OrderServiceImpl` μ— `DiscountPolicy` μ <br>
> κµ¬ν„ κ°μ²΄λ¥Ό λ€μ‹  μƒμ„±ν•κ³  μ£Όμ…ν•΄μ£Όμ–΄μ•Ό ν•λ‹¤.

### > κ΄€μ‹¬μ‚¬λ¥Ό λ¶„λ¦¬ν•μ!

<br>

### 4. **AppConfigμ λ“±μ¥** 
- μ• ν”λ¦¬μΌ€μ΄μ…μ μ „μ²΄ λ™μ‘ λ°©μ‹μ„ κµ¬μ„±(config) ν•κΈ° μ„ν•΄ <br>
β€κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±β€ν•κ³ , β€μ—°κ²°β€ν•λ” μ±…μ„μ„ κ°–λ” <br>
λ³„λ„μ μ„¤μ • ν΄λμ¤λ¥Ό λ§λ“¤μ.

<br>

- **AppConfig**λ” μ• ν”λ¦¬μΌ€μ΄μ…μ μ‹¤μ  λ™μ‘μ— ν•„μ”ν• κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•λ‹¤.
    - `MemberServiceImpl`
    - `MemoryMemberRepository`
    - `OrderServiceImpl`
    - `FixDiscountPolicy`

<br>

- **AppConfig**λ” μƒμ„±ν• κ°μ²΄ μΈμ¤ν„΄μ¤μ μ°Έμ΅°(λ νΌλ°μ¤)λ¥Ό μƒμ„±μλ¥Ό ν†µν•΄μ„ μ£Όμ…(μ—°κ²°)ν•΄μ¤€λ‹¤.
    - `MemberServiceImpl` β†’ `MemoryMemberRepository`
    - `OrderServiceImpl` β†’ `MemoryMemberRepository`, `FixDiscountPolicy`

![appconfig](https://user-images.githubusercontent.com/87354210/174025243-d81f701e-fcea-4dee-aa23-b48c8ec86092.png)

<br>

- κ°μ²΄μ μƒμ„±κ³Ό μ—°κ²°μ€ `AppConfig` κ°€ λ‹΄λ‹Ήν•λ‹¤.
- **DIP μ™„μ„±:** `MemberServiceImpl` μ€ `MemberRepository` μΈ μ¶”μƒμ—λ§ μμ΅΄ν•λ©΄ λλ‹¤. μ΄μ  κµ¬μ²΄ ν΄λμ¤λ¥Ό λ°λΌλ„ λλ‹¤.
- **κ΄€μ‹¬μ‚¬μ λ¶„λ¦¬:** κ°μ²΄λ¥Ό μƒμ„±ν•κ³  μ—°κ²°ν•λ” μ—­ν• κ³Ό μ‹¤ν–‰ν•λ” μ—­ν• μ΄ λ…ν™•ν λ¶„λ¦¬λμ—λ‹¤.

<br>

### 5. **μƒλ΅μ΄ κµ¬μ΅°μ™€ ν• μΈ μ •μ±… μ μ©**
- μ •μ•΅ν• μΈμ •μ±… -> **μ •λ¥ ν• μΈμ •μ±…**μΌλ΅ λ³€κ²½
- `FixDiscountPolicy` β†’ `RateDiscountPolicy`
- `AppConfig` μ λ“±μ¥μΌλ΅ μ• ν”λ¦¬μΌ€μ΄μ…μ΄ ν¬κ² **μ‚¬μ© μμ—­**κ³Ό, <br>
  κ°μ²΄λ¥Ό μƒμ„±ν•κ³  **κµ¬μ„±(Configuration)ν•λ” μμ—­**μΌλ΅ λ¶„λ¦¬λμ—λ‹¤.
  
<br>

  ![appcofig2](https://user-images.githubusercontent.com/87354210/174026052-70b7b5b8-172e-4ae4-bb8c-c078d703e6f0.png)

- μ΄μ  ν• μΈ μ •μ±…μ„ λ³€κ²½ν•΄λ„ μ• ν”λ¦¬μΌ€μ΄μ…μ κµ¬μ„± μ—­ν• μ„ λ‹΄λ‹Ήν•λ” **AppConfig**λ§ λ³€κ²½ν•λ©΄ λλ‹¤.

<br>

### 6. **IoC, DI, κ·Έλ¦¬κ³  μ»¨ν…μ΄λ„**
> μ μ–΄μ μ—­μ „ IoC(Inversion of Control)

- ν”„λ΅κ·Έλ¨μ— λ€ν• μ μ–΄ νλ¦„μ— λ€ν• κ¶ν•μ€ λ¨λ‘ `AppConfig` κ°€ κ°€μ§€κ³  μλ‹¤. 
  <br> μ‹¬μ§€μ–΄ `OrderServiceImpl` λ„ `AppConfig` κ°€ μƒμ„±ν•λ‹¤.
- μ΄λ ‡λ“― ν”„λ΅κ·Έλ¨μ μ μ–΄ νλ¦„μ„ μ§μ ‘ μ μ–΄ν•λ” κ²ƒμ΄ μ•„λ‹λΌ
  <br> μ™Έλ¶€μ—μ„ κ΄€λ¦¬ν•λ” κ²ƒμ„ **μ μ–΄μ μ—­μ „(IoC)**μ΄λΌ ν•λ‹¤.

<br>

**μμ΅΄κ΄€κ³„ μ£Όμ… DI(Dependency Injection)**

- `OrderServiceImpl` μ€ `DiscountPolicy` μΈν„°νμ΄μ¤μ— μμ΅΄ν•λ‹¤. μ‹¤μ  μ–΄λ–¤ κµ¬ν„ κ°μ²΄κ°€ μ‚¬μ©λ μ§€λ” λ¨λ¥Έλ‹¤.
- μμ΅΄κ΄€κ³„λ” **μ •μ μΈ ν΄λμ¤ μμ΅΄ κ΄€κ³„**μ™€ **μ‹¤ν–‰ μ‹μ μ— κ²°μ •λλ” λ™μ μΈ κ°μ²΄(μΈμ¤ν„΄μ¤)** μμ΅΄ κ΄€κ³„ λ‘μ„ λ¶„λ¦¬ν•΄μ„ μƒκ°ν•΄μ•Ό ν•λ‹¤.

![diagram](https://user-images.githubusercontent.com/87354210/174027827-34a477b8-3a3d-4562-8d5b-f86fe0bdd03f.png)


- μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰ μ‹μ (λ°νƒ€μ„)μ— μ™Έλ¶€μ—μ„ μ‹¤μ  κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  <br>
ν΄λΌμ΄μ–ΈνΈμ— μ „λ‹¬ν•΄μ„ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„μ μ‹¤μ  μμ΅΄κ΄€κ³„κ°€ μ—°κ²° λλ” κ²ƒμ„ **μμ΅΄κ΄€κ³„ μ£Όμ…**μ΄λΌ ν•λ‹¤.

<br>

**IoC μ»¨ν…μ΄λ„, DI μ»¨ν…μ΄λ„**

- `AppConfig` μ²λΌ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  κ΄€λ¦¬ν•λ©΄μ„ μμ΅΄κ΄€κ³„λ¥Ό μ—°κ²°ν•΄ μ£Όλ” κ²ƒμ„ <br> **IoC μ»¨ν…μ΄λ„** λλ” **DI μ»¨ν…μ΄λ„**λΌ ν•λ‹¤.
- μμ΅΄κ΄€κ³„ μ£Όμ…μ— μ΄μ μ„ λ§μ¶”μ–΄ μµκ·Όμ—λ” μ£Όλ΅ **DI μ»¨ν…μ΄λ„**λΌ ν•λ‹¤. λλ” μ–΄μƒλΈ”λ¬, μ¤λΈμ νΈ ν©ν† λ¦¬ λ“±μΌλ΅ λ¶λ¦¬κΈ°λ„ ν•λ‹¤.
    
    
